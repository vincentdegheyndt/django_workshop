0. [Installation de Python-Django](instaclone/README.md)
1. [Création de l'app](instaclone/creationappli.md)
2. [Structure](instaclone/structure.md)
3. [Media](instaclone/media.md)
4. [CSS](instaclone/css.md)
5. [Formulaire](instaclone/formulaire.md)
 
## Les formulaires

Pour pouvoir ajoutez des éléments, il va falloir créer un formulaire. Django a prévu le coup : il nous suffit de créer un nouveau fichier `forms.py` et d'y ajoutez 3 choses:

- un import du module forms de Django:

    from django import forms

- un import du modèle of course:

    from .models import Post

- et une classe qui se base sur un modèle du module forms:

```
class PostForm(forms.ModelForm):

    class Meta:
        model = Post
        title = forms.CharField(max_length=100)
        fields = ['cover', 'title']
```

Après ça, on crée le lien avec views.py en créant une autre classe. Mais d'abord, il faut encore importer quelques trucs !

- la classe PostForm qu'on vient de créer:

    from .forms import PostForm 

- le module reverse_lazy pour indiquer où se rediriger une fois que la requête est exécutée:

    from django.urls import reverse_lazy 

On peut maintenant créer la classe :

```
class CreatePostView(generic.CreateView): 
    model = Post
    form_class = PostForm
    template_name = 'post.html'
    success_url = reverse_lazy('gallery:index')
```

Il faudra bien sûr editer l'url dans `urls.py` pour refléter la nouvelle classe :

    path('post/', views.CreatePostView.as_view(), name='add_post')

Et éditer la template `post.html` pour y afficher le formulaire :

```
{% extends "base.html" %}

{% block title %} InstaClone | Image Upload {% endblock %}

{% load static %}

{% block content %}

<form method="post" enctype="multipart/form-data">
<h1> Ajoute une photo </h1>
  {% csrf_token %}
  {{ form.as_p }}
  <button type="submit">OK</button>
</form>

{% endblock %}

```

Pour terminer, retournez sur le template `index.html` et ajoutez-y le lien vers la page d'upload sur l'icone :

```
{% block addPhoto %}

<a class="photoAdd" href="#">
    <img src="{% static '/img/addpic.png' %}">
</a>

{% endblock %}
```

Et voilà ! 
